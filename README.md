# ScholarFlow

å­¦æœ¯ç¨¿ä»¶ç®¡ç†ç³»ç»Ÿ - åŸºäº Next.js å’Œ FastAPI çš„å…¨æ ˆåº”ç”¨

## é¡¹ç›®æ¦‚è§ˆ

ScholarFlow æ˜¯ä¸€ä¸ªç°ä»£åŒ–çš„å­¦æœ¯ç¨¿ä»¶æäº¤å’Œå®¡ç¨¿ç®¡ç†ç³»ç»Ÿï¼Œæ”¯æŒä½œè€…æäº¤ç¨¿ä»¶ã€ç¼–è¾‘åˆ†é…å®¡ç¨¿äººã€å®¡ç¨¿äººå®¡é˜…ç¨¿ä»¶ç­‰åŠŸèƒ½ã€‚

## æŠ€æœ¯æ ˆ

### å‰ç«¯
- **æ¡†æ¶**: Next.js 14.2 (App Router)
- **è¯­è¨€**: TypeScript 5.x
- **UI åº“**: React 18.x, Shadcn UI, Tailwind CSS 3.4
- **çŠ¶æ€ç®¡ç†**: React Hooks
- **æµ‹è¯•**: Vitest (å•å…ƒæµ‹è¯•), Playwright (E2E æµ‹è¯•)

### åç«¯
- **æ¡†æ¶**: FastAPI 0.115+
- **è¯­è¨€**: Python 3.14+
- **æ•°æ®éªŒè¯**: Pydantic v2
- **æµ‹è¯•**: pytest, pytest-cov

### åŸºç¡€è®¾æ–½
- **æ•°æ®åº“**: Supabase (PostgreSQL)
- **è®¤è¯**: Supabase Auth (JWT)
- **å­˜å‚¨**: Supabase Storage
- **SDK**: Supabase-js v2.x, Supabase-py v2.x

### AI/ML
- **OpenAI SDK**: GPT-4o (å†…å®¹åˆ†æ)
- **scikit-learn**: TF-IDF ç›¸ä¼¼åº¦åŒ¹é…

## é¡¹ç›®ç»“æ„

```
scholar-flow/
â”œâ”€â”€ backend/              # FastAPI åç«¯
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ api/v1/      # API è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ core/        # ä¸šåŠ¡é€»è¾‘
â”‚   â”‚   â”œâ”€â”€ models/      # Pydantic æ¨¡å‹
â”‚   â”‚   â””â”€â”€ services/    # ç¬¬ä¸‰æ–¹é›†æˆ
â”‚   â”œâ”€â”€ tests/           # pytest æµ‹è¯•
â”‚   â””â”€â”€ requirements.txt
â”œâ”€â”€ frontend/            # Next.js å‰ç«¯
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ app/         # Next.js App Router
â”‚   â”‚   â”œâ”€â”€ components/  # UI ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ lib/         # API å®¢æˆ·ç«¯
â”‚   â”‚   â””â”€â”€ types/       # TypeScript ç±»å‹
â”‚   â”œâ”€â”€ tests/           # Vitest + Playwright
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ scripts/             # å·¥å…·è„šæœ¬
â”œâ”€â”€ specs/               # åŠŸèƒ½è§„èŒƒæ–‡æ¡£
â””â”€â”€ .specify/            # è§„æ ¼é©±åŠ¨å¼€å‘æ¨¡æ¿
```

## å¿«é€Ÿå¼€å§‹

### å‰ç½®è¦æ±‚

- **æ“ä½œç³»ç»Ÿ**: Arch Linux (æ¨è)
- **Python**: 3.14+
- **Node.js**: 20.x
- **Supabase**: å·²é…ç½®é¡¹ç›®

### å®‰è£…ä¾èµ–

```bash
# åç«¯ä¾èµ–
cd backend
pip install -r requirements.txt --break-system-packages

# å‰ç«¯ä¾èµ–
cd ../frontend
pnpm install
```

### é…ç½®ç¯å¢ƒå˜é‡

```bash
# å¤åˆ¶ç¯å¢ƒå˜é‡æ¨¡æ¿
cp .env.example .env

# ç¼–è¾‘ .env æ–‡ä»¶ï¼Œå¡«å…¥ Supabase é…ç½®
```

### å¯åŠ¨å¼€å‘æœåŠ¡å™¨

```bash
# ä½¿ç”¨æä¾›çš„å¯åŠ¨è„šæœ¬
./start.sh

# æˆ–åˆ†åˆ«å¯åŠ¨
cd backend && uvicorn main:app --reload --port 8000 &
cd frontend && pnpm dev
```

### è®¿é—®åº”ç”¨

- **å‰ç«¯**: http://localhost:3000
- **åç«¯ API**: http://localhost:8000
- **API æ–‡æ¡£**: http://localhost:8000/docs

## æµ‹è¯•

### è¿è¡Œæ‰€æœ‰æµ‹è¯•

```bash
./scripts/run-all-tests.sh
```

### åç«¯æµ‹è¯•

```bash
cd backend
pytest                          # è¿è¡Œæ‰€æœ‰æµ‹è¯•
pytest --cov=src --cov-report=html  # ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
```

### å‰ç«¯æµ‹è¯•

```bash
cd frontend
npm run test                    # å•å…ƒæµ‹è¯•
npm run test:coverage           # å•å…ƒæµ‹è¯• + è¦†ç›–ç‡
npm run test:e2e                # E2E æµ‹è¯•
```

## å¼€å‘æŒ‡å—

### è§„æ ¼é©±åŠ¨å¼€å‘

æœ¬é¡¹ç›®é‡‡ç”¨è§„æ ¼é©±åŠ¨å¼€å‘ï¼ˆSpec-Driven Developmentï¼‰æ–¹æ³•è®ºï¼š

```bash
/speckit.specify    # åˆ›å»ºæˆ–æ›´æ–°åŠŸèƒ½è§„èŒƒ
/speckit.plan       # ç”Ÿæˆå®æ–½è®¡åˆ’

/speckit.tasks      # ç”Ÿæˆä»»åŠ¡åˆ—è¡¨
/speckit.implement  # æ‰§è¡Œå®æ–½è®¡åˆ’
```

### é¡¹ç›®å®ªæ³•

é¡¹ç›®éµå¾ª [ScholarFlow Constitution](.specify/memory/constitution.md) v2.0.0ï¼ŒåŒ…å«ä»¥ä¸‹æ ¸å¿ƒåŸåˆ™ï¼š

1. **è§„æ ¼é©±åŠ¨å¼€å‘**: æ‰€æœ‰åŠŸèƒ½å¼€å‘å‰å¿…é¡»æœ‰å®Œæ•´çš„ spec.md å’Œ plan.md
2. **æµ‹è¯•å…ˆè¡Œ**: åŠŸèƒ½å¿…é¡»æŒ‰å¯ç‹¬ç«‹æµ‹è¯•çš„ User Stories æ‹†åˆ†
3. **é˜¶æ®µé—¨æ§**: ä¸¥æ ¼éµå®ˆç ”ç©¶ -> è®¾è®¡ -> åŸºç¡€æ­å»º -> åŠŸèƒ½å®ç°çš„é¡ºåº
4. **æ¶æ„ç®€çº¦**: æœ€å°åŒ–å¤æ‚åº¦ï¼Œæ ¸å¿ƒä¸šåŠ¡é—¨ç¦æ¸…æ™°å¯è§
5. **å¯è§‚æµ‹æ€§**: æ‰€æœ‰ User Story å¿…é¡»åŒ…å«å¼‚å¸¸å¤„ç†ã€ç»“æ„åŒ–æ—¥å¿—

### å®‰å…¨ä¸è®¤è¯

- æ‰€æœ‰æ•æ„Ÿæ“ä½œå¿…é¡»è¦æ±‚èº«ä»½éªŒè¯
- ä½¿ç”¨ Supabase JWT ä»¤ç‰Œè¿›è¡Œèº«ä»½éªŒè¯
- å®ç°åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ï¼ˆRBACï¼‰
- ä½¿ç”¨çœŸå®çš„ç”¨æˆ· IDï¼Œä¸ä½¿ç”¨ç¡¬ç¼–ç æˆ–æ¨¡æ‹Ÿæ•°æ®

### API å¼€å‘è§„èŒƒ

- API ä¼˜å…ˆè®¾è®¡ï¼šå®ç°å‰å®šä¹‰ OpenAPI/Swagger è§„èŒƒ
- ä½¿ç”¨ä¸€è‡´çš„è·¯å¾„æ¨¡å¼ï¼ˆé™¤éå¿…è¦ï¼Œå¦åˆ™ä¸ä½¿ç”¨å°¾éƒ¨æ–œæ ï¼‰
- å§‹ç»ˆå¯¹ API è¿›è¡Œç‰ˆæœ¬æ§åˆ¶ï¼ˆä¾‹å¦‚ `/api/v1/`ï¼‰
- å®ç°ç»Ÿä¸€çš„é”™è¯¯å¤„ç†ä¸­é—´ä»¶

### æµ‹è¯•ç­–ç•¥

- æµ‹è¯•æ‰€æœ‰ HTTP æ–¹æ³•ï¼ˆGETã€POSTã€PUTã€DELETEï¼‰
- ç¡®ä¿å‰åç«¯ API è·¯å¾„å®Œå…¨ä¸€è‡´
- æµ‹è¯•æœ‰æ•ˆ/ç¼ºå¤±/æ— æ•ˆ token çš„åœºæ™¯
- æµ‹è¯•é”™è¯¯æƒ…å†µï¼Œä¸ä»…ä»…æ˜¯ happy path
- ä½¿ç”¨çœŸå®çš„æ•°æ®åº“è¿æ¥è¿›è¡Œé›†æˆæµ‹è¯•

## åŠŸèƒ½æ¨¡å—

| æ¨¡å— | çŠ¶æ€ | æè¿° |
|------|------|------|
| 001-core-workflow | âœ… å®Œæˆ | æ ¸å¿ƒå·¥ä½œæµ - ç¨¿ä»¶æäº¤ã€å®¡ç¨¿æµç¨‹ |
| 002-plagiarism-check | âœ… å®Œæˆ | æŠ„è¢­æ£€æµ‹ - TF-IDF ç›¸ä¼¼åº¦åŒ¹é… |
| 003-portal-redesign | âœ… å®Œæˆ | é—¨æˆ·é‡è®¾è®¡ |
| 004-content-ecosystem | âœ… å®Œæˆ | å†…å®¹ç”Ÿæ€ç³»ç»Ÿ - å…¬å…±é—¨æˆ·å’Œ PDF é˜…è¯»å™¨ |
| 005-system-integrity-and-auth | âœ… å®Œæˆ | ç³»ç»Ÿå®Œæ•´æ€§ä¸è®¤è¯ |
| 006-quality-assurance-suite | âœ… å®Œæˆ | è´¨é‡ä¿è¯å¥—ä»¶ |
| 007-reviewer-workspace | âœ… å®Œæˆ | å®¡ç¨¿äººå·¥ä½œåŒº |
| 008-editor-command-center | âœ… å®Œæˆ | ç¼–è¾‘æŒ‡æŒ¥ä¸­å¿ƒ |
| 009-test-coverage | ğŸš§ è¿›è¡Œä¸­ | æµ‹è¯•è¦†ç›– - æå‡æµ‹è¯•è¦†ç›–ç‡ |

## å¼€å‘ç¯å¢ƒ

### Arch Linux ç‰¹å®šé…ç½®

æœ¬é¡¹ç›®å¼€å‘ç¯å¢ƒé”å®šä¸º **Arch Linux**ï¼š

- **åŒ…ç®¡ç†ä¼˜å…ˆçº§**: `pacman` > `paru` > `pip`/`pnpm`
- **ç”¨æˆ·æƒé™**: `paru` å¿…é¡»ä½¿ç”¨ç”¨æˆ· `louis` æ‰§è¡Œ
- **Python å®‰è£…**: ä½¿ç”¨ `--break-system-packages` å‚æ•°
- **Docker**: å¿…é¡»é…ç½®å›½å†…é•œåƒæº

### Git å·¥ä½œæµ

```bash
# æ¯ä¸ªåŸå­åŒ–ä»»åŠ¡å®Œæˆåç«‹å³æäº¤
git add .
git commit -m "feat: [brief description]"
git push
```

## æ–‡æ¡£

- [é¡¹ç›®å®ªæ³•](.specify/memory/constitution.md) - æœ€é«˜æŒ‡å¯¼åŸåˆ™
- [å¼€å‘æŒ‡å—](GEMINI.md) - è¯¦ç»†å¼€å‘æŒ‡å—
- [ç»éªŒæ•™è®­](LESSONS_LEARNED.md) - é¡¹ç›®ç»éªŒæ€»ç»“
- [Claude é…ç½®](CLAUDE.md) - Claude Code é…ç½®

## è®¸å¯è¯

MIT License

## è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

## è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜ï¼Œè¯·é€šè¿‡ GitHub Issues è”ç³»ã€‚
